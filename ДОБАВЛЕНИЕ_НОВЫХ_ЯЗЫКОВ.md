# Добавление новых языков в плагин AI Multilingual Chat

Это руководство объясняет, как добавить переводы на новые языки для плагина WordPress AI Multilingual Chat.

## Обзор

Плагин использует встроенную систему интернационализации (i18n) WordPress для управления переводами. Весь пользовательский текст обернут в функции перевода, такие как `__()`, `_e()`, `esc_html__()` и т.д.

## Структура файлов

```
ai-multilingual-chat/
└── languages/
    ├── ai-multilingual-chat.pot          # Шаблонный файл со всеми переводимыми строками
    ├── ai-multilingual-chat-ru_RU.po     # Исходник русского перевода
    ├── ai-multilingual-chat-ru_RU.mo     # Скомпилированный русский перевод
    ├── ai-multilingual-chat-{locale}.po  # Исходник вашего языка
    └── ai-multilingual-chat-{locale}.mo  # Скомпилированный файл вашего языка
```

## Пошаговое руководство по добавлению нового языка

### Метод 1: Использование Poedit (Рекомендуется для неразработчиков)

1. **Установите Poedit**
   - Скачайте с https://poedit.net/
   - Доступен для Windows, macOS и Linux

2. **Создайте новый перевод**
   - Откройте Poedit
   - Нажмите "Создать новый перевод"
   - Выберите файл `ai-multilingual-chat.pot` из директории `languages/`
   - Выберите целевой язык (например, испанский, немецкий, французский)
   - Сохраните файл с правильным кодом локали:
     - Испанский (Испания): `ai-multilingual-chat-es_ES.po`
     - Немецкий: `ai-multilingual-chat-de_DE.po`
     - Французский: `ai-multilingual-chat-fr_FR.po`
     - Итальянский: `ai-multilingual-chat-it_IT.po`

3. **Переведите строки**
   - Пройдитесь по каждой строке в Poedit
   - Введите ваш перевод в нижнее текстовое поле
   - Poedit автоматически скомпилирует файл `.mo` при сохранении

4. **Загрузите файлы**
   - Загрузите оба файла `.po` и `.mo` в директорию `wp-content/plugins/ai-multilingual-chat/languages/`
   - Плагин автоматически определит и использует перевод на основе настроек языка WordPress

### Метод 2: Использование командной строки (Для разработчиков)

1. **Сгенерируйте PO файл из шаблона POT**
   ```bash
   cd wp-content/plugins/ai-multilingual-chat/languages/
   msginit -i ai-multilingual-chat.pot -o ai-multilingual-chat-fr_FR.po -l fr_FR
   ```

2. **Отредактируйте PO файл**
   - Откройте файл `.po` в вашем любимом текстовом редакторе
   - Переведите каждую строку `msgstr ""`
   ```
   msgid "Settings"
   msgstr "Настройки"
   ```

3. **Скомпилируйте в MO файл**
   ```bash
   msgfmt -o ai-multilingual-chat-fr_FR.mo ai-multilingual-chat-fr_FR.po
   ```

4. **Протестируйте перевод**
   - Загрузите файлы в директорию languages
   - Измените язык WordPress в Настройки → Общие
   - Проверьте, что переводы отображаются правильно

### Метод 3: Использование плагина Loco Translate (Плагин WordPress)

1. **Установите Loco Translate**
   - Перейдите в Плагины → Добавить новый в админ-панели WordPress
   - Найдите "Loco Translate"
   - Установите и активируйте

2. **Создайте перевод**
   - Перейдите в Loco Translate → Плагины
   - Найдите "AI Multilingual Chat"
   - Нажмите "New language"
   - Выберите ваш язык
   - Выберите "WordPress location"
   - Нажмите "Start translating"

3. **Переводите в браузере**
   - Переводите каждую строку прямо в вашем браузере
   - Регулярно нажимайте "Save"
   - Loco Translate автоматически компилирует MO файл

## Справочник кодов локалей

Распространенные коды локалей WordPress:

| Язык | Код | Шаблон имени файла |
|------|-----|--------------------|
| Английский (США) | en_US | ai-multilingual-chat-en_US.po |
| Русский | ru_RU | ai-multilingual-chat-ru_RU.po |
| Испанский (Испания) | es_ES | ai-multilingual-chat-es_ES.po |
| Французский (Франция) | fr_FR | ai-multilingual-chat-fr_FR.po |
| Немецкий | de_DE | ai-multilingual-chat-de_DE.po |
| Итальянский | it_IT | ai-multilingual-chat-it_IT.po |
| Португальский (Бразилия) | pt_BR | ai-multilingual-chat-pt_BR.po |
| Португальский (Португалия) | pt_PT | ai-multilingual-chat-pt_PT.po |
| Китайский (упрощенный) | zh_CN | ai-multilingual-chat-zh_CN.po |
| Японский | ja | ai-multilingual-chat-ja.po |
| Корейский | ko_KR | ai-multilingual-chat-ko_KR.po |
| Украинский | uk | ai-multilingual-chat-uk.po |
| Польский | pl_PL | ai-multilingual-chat-pl_PL.po |
| Голландский | nl_NL | ai-multilingual-chat-nl_NL.po |
| Турецкий | tr_TR | ai-multilingual-chat-tr_TR.po |
| Арабский | ar | ai-multilingual-chat-ar.po |

Полный список: https://make.wordpress.org/polyglots/teams/

## Важные замечания

1. **Кодировка символов**: Все PO/MO файлы должны быть в кодировке UTF-8
2. **Специальные символы**: Экранируйте кавычки в переводах: `\"` вместо `"`
3. **Заполнители**: Сохраняйте заполнители типа `%s`, `%d`, `%1$s` в их исходных позициях
4. **HTML**: Сохраняйте HTML теги типа `<strong>`, `<br>` в переводах
5. **Контекст**: Читайте комментарии контекста в PO файлах, чтобы понять, где используется текст

## Локализация фронтенд-виджета

Виджет чата использует `i18n.js` для переводов на фронтенде. Чтобы добавить новый язык в виджет:

1. Откройте `ai-multilingual-chat/i18n.js`
2. Добавьте код вашего языка и переводы в объект `translations`:

```javascript
translations: {
    'fr': {
        'welcome': 'Bienvenue!',
        'introduce_yourself': 'Veuillez vous présenter pour commencer le chat',
        'your_name': 'Votre nom',
        'start_chat': 'Démarrer le chat',
        // ... больше переводов
    }
}
```

## Тестирование вашего перевода

1. **Активируйте язык**
   - Перейдите в админ-панель WordPress → Настройки → Общие
   - Измените "Язык сайта" на ваш новый язык
   - Сохраните изменения

2. **Очистите кеш**
   - Очистите кеш WordPress, если используете плагин кеширования
   - Очистите кеш браузера
   - Перезагрузите страницу

3. **Проверьте перевод**
   - Проверьте все админ-страницы (Настройки, FAQ, Статистика)
   - Проверьте фронтенд виджет чата
   - Протестируйте отправку форм и сообщения об ошибках
   - Проверьте email уведомления

## Обновление переводов

Когда плагин обновляется с новыми функциями:

1. **Обновите POT файл** (Задача разработчика - выполняется при добавлении новых функций)
   ```bash
   wp i18n make-pot . languages/ai-multilingual-chat.pot --domain=ai-multilingual-chat
   ```

2. **Обновите ваш PO файл**
   - Откройте файл `.po` вашего языка в Poedit
   - Нажмите "Обновить из POT файла"
   - Выберите новый `ai-multilingual-chat.pot`
   - Переведите новые строки
   - Сохраните (MO файл компилируется автоматически)

## Вклад в переводы

Если вы создали перевод на новый язык:

1. Сделайте форк репозитория плагина на GitHub
2. Добавьте ваши файлы `.po` и `.mo` в директорию `languages/`
3. Создайте pull request с вашим переводом
4. Включите информацию о вашем языке и коде локали

## Нужна помощь?

- **Документация**: https://developer.wordpress.org/plugins/internationalization/
- **Документация Poedit**: https://poedit.net/trac/wiki/Doc
- **Поддержка плагина**: https://web-proekt.com
- **GitHub Issues**: https://github.com/Fill777555/ai-multilingual-chat/issues

## Статистика переводов

Текущий охват переводами плагина:
- **Всего строк**: 174
- **Русский (ru_RU)**: 100% завершено
- **Другие языки**: Приветствуются вклады сообщества!

---

**Спасибо, что помогаете сделать AI Multilingual Chat доступным на вашем языке!** 🌍
