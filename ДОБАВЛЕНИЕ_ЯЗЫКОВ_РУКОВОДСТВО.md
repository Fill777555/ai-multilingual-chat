# Добавление новых языков в плагин AI Multilingual Chat

Это руководство объясняет, как администраторы могут добавить переводы для новых языков в плагин AI Multilingual Chat.

## Требования

- Доступ к файлам вашего WordPress сайта через FTP/SFTP или cPanel File Manager
- Текстовый редактор (рекомендуется: Poedit, который является бесплатным и специально разработан для переводов)
- Базовое понимание целевого языка

## Вариант 1: Использование Poedit (Рекомендуется)

### Шаг 1: Скачайте и установите Poedit

1. Скачайте Poedit с https://poedit.net/
2. Установите его на свой компьютер

### Шаг 2: Создайте новый перевод

1. Откройте Poedit
2. Нажмите **Файл** → **Создать из POT/PO файла**
3. Перейдите к вашей установке WordPress:
   ```
   /wp-content/plugins/ai-multilingual-chat/languages/
   ```
4. Выберите файл `ai-multilingual-chat.pot`
5. Poedit попросит вас выбрать язык, на который вы хотите перевести (например, Немецкий - `de_DE`, Французский - `fr_FR`, Испанский - `es_ES`)

### Шаг 3: Переведите строки

1. В Poedit вы увидите список всех переводимых строк
2. Выберите каждую строку из списка
3. Введите ваш перевод в нижнее текстовое поле
4. Нажмите **Сохранить** или нажмите `Ctrl+S` (Windows/Linux) или `Cmd+S` (Mac)

### Шаг 4: Сохраните файлы перевода

1. Poedit автоматически создаст два файла:
   - `.po` файл (редактируемый источник)
   - `.mo` файл (скомпилированный бинарный для WordPress)
2. Сохраните их с соглашением об именовании: `ai-multilingual-chat-{locale}.po` и `ai-multilingual-chat-{locale}.mo`
   
   Примеры:
   - Немецкий: `ai-multilingual-chat-de_DE.po` и `ai-multilingual-chat-de_DE.mo`
   - Французский: `ai-multilingual-chat-fr_FR.po` и `ai-multilingual-chat-fr_FR.mo`
   - Испанский (Испания): `ai-multilingual-chat-es_ES.po` и `ai-multilingual-chat-es_ES.mo`

### Шаг 5: Загрузите на ваш WordPress сайт

1. Загрузите оба файла `.po` и `.mo` в:
   ```
   /wp-content/plugins/ai-multilingual-chat/languages/
   ```

### Шаг 6: Активируйте язык в WordPress

1. Перейдите в Админ-панель WordPress → **Настройки** → **Общие**
2. Измените **Язык сайта** на ваш новый добавленный язык
3. Нажмите **Сохранить изменения**
4. Плагин теперь автоматически будет отображаться на выбранном языке!

## Вариант 2: Ручной перевод (Продвинутый)

Если вы предпочитаете не использовать Poedit, вы можете редактировать `.po` файл вручную:

### Шаг 1: Скопируйте шаблон

```bash
cd /wp-content/plugins/ai-multilingual-chat/languages/
cp ai-multilingual-chat.pot ai-multilingual-chat-de_DE.po
```

### Шаг 2: Отредактируйте PO файл

Откройте `ai-multilingual-chat-de_DE.po` в текстовом редакторе и обновите заголовок:

```po
"Language: de_DE\n"
"Plural-Forms: nplurals=2; plural=(n != 1);\n"
```

### Шаг 3: Переведите каждую строку

Найдите записи вроде этой:

```po
msgid "Settings"
msgstr ""
```

Добавьте ваш перевод:

```po
msgid "Settings"
msgstr "Einstellungen"
```

### Шаг 4: Скомпилируйте MO файл

Используйте команду `msgfmt` (требуется gettext tools):

```bash
msgfmt -o ai-multilingual-chat-de_DE.mo ai-multilingual-chat-de_DE.po
```

### Шаг 5: Активируйте в WordPress

Следуйте Шагу 6 из Варианта 1 выше.

## Справочник кодов языков

Распространенные коды локалей WordPress:

| Язык | Код |
|------|-----|
| Английский (США) | en_US |
| Английский (Великобритания) | en_GB |
| Русский | ru_RU |
| Немецкий | de_DE |
| Французский | fr_FR |
| Испанский (Испания) | es_ES |
| Испанский (Мексика) | es_MX |
| Итальянский | it_IT |
| Португальский (Бразилия) | pt_BR |
| Португальский (Португалия) | pt_PT |
| Украинский | uk |
| Польский | pl_PL |
| Голландский | nl_NL |
| Китайский (Упрощенный) | zh_CN |
| Японский | ja |

Для полного списка см.: https://wpml.org/documentation/support/language-codes/

## Формы множественного числа

Разные языки имеют разные правила множественного числа. Вот некоторые распространенные:

**Английский, Немецкий, Голландский, Шведский:**
```po
Plural-Forms: nplurals=2; plural=(n != 1);
```

**Французский, Португальский (Бразилия):**
```po
Plural-Forms: nplurals=2; plural=(n > 1);
```

**Русский, Украинский, Польский:**
```po
Plural-Forms: nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<12 || n%100>14) ? 1 : 2);
```

**Японский, Корейский, Турецкий:**
```po
Plural-Forms: nplurals=1; plural=0;
```

## Тестирование вашего перевода

1. Измените язык сайта WordPress на ваш новый язык
2. Посетите страницы плагина в админ-области:
   - **AI Чат** → **Управление диалогами**
   - **AI Чат** → **Настройки**
   - **AI Чат** → **Статистика**
   - **AI Чат** → **FAQ**
3. Проверьте виджет чата на фронтенде
4. Убедитесь, что все строки переведены правильно

## Обновление существующих переводов

Когда плагин обновляется с новыми функциями:

1. Скачайте последний файл `ai-multilingual-chat.pot` из плагина
2. Откройте ваш существующий `.po` файл в Poedit
3. Нажмите **Каталог** → **Обновить из POT файла**
4. Выберите новый `.pot` файл
5. Poedit добавит новые непереведенные строки
6. Переведите новые строки
7. Сохраните и загрузите обновленные `.mo` и `.po` файлы

## Вклад в перевод

Если вы хотите поделиться своим переводом с сообществом:

1. Тщательно протестируйте свой перевод
2. Создайте issue или pull request на GitHub в репозитории плагина
3. Приложите ваш `.po` файл (`.mo` может быть создан автоматически)
4. Укажите:
   - Название языка и код
   - Ваше имя для благодарности (опционально)
   - Любые специфические заметки о переводе

## Устранение неполадок

### Перевод не отображается

1. **Проверьте имена файлов**: Должны следовать шаблону `ai-multilingual-chat-{locale}.mo`
2. **Проверьте расположение файлов**: Файлы должны быть в `/wp-content/plugins/ai-multilingual-chat/languages/`
3. **Проверьте язык WordPress**: Админ → Настройки → Общие → Язык сайта
4. **Очистите кэш**: Если используется плагин кэширования, очистите кэш
5. **Проверьте права**: Файлы должны быть читаемыми (права 644)

### Частичный перевод

- Убедитесь, что вы перевели все строки в PO файле
- Перекомпилируйте MO файл после внесения изменений
- Очистите кэш браузера и WordPress кэш

### Специальные символы не отображаются

- Убедитесь, что заголовок вашего PO файла указывает кодировку UTF-8:
  ```po
  "Content-Type: text/plain; charset=UTF-8\n"
  ```

## Нужна помощь?

- Проверьте документацию плагина
- Посетите форум поддержки
- Свяжитесь с разработчиком плагина на https://web-proekt.com

## Структура файлов

```
/wp-content/plugins/ai-multilingual-chat/
├── languages/
│   ├── ai-multilingual-chat.pot          # Файл-шаблон
│   ├── ai-multilingual-chat-ru_RU.po     # Русский источник
│   ├── ai-multilingual-chat-ru_RU.mo     # Русский скомпилированный
│   ├── ai-multilingual-chat-de_DE.po     # Ваш немецкий источник
│   └── ai-multilingual-chat-de_DE.mo     # Ваш немецкий скомпилированный
```

## Лучшие практики

1. **Учитывайте контекст**: Переводите с учетом того, где текст появляется в интерфейсе
2. **Сохраняйте форматирование**: Оставляйте заполнители вроде `%s`, `%d`, `%1$s` точно такими же
3. **Будьте последовательны**: Используйте одинаковые термины во всем переводе
4. **Тщательно тестируйте**: Проверьте все админ страницы и фронтенд виджет
5. **Регулярно обновляйте**: Проверяйте наличие обновлений при обновлении плагина
6. **Делайте резервные копии**: Сохраняйте ваши PO файлы, так как их можно легко редактировать и перекомпилировать

---

**Примечание**: Этот плагин использует стандартную систему локализации WordPress. Любой инструмент, который работает с переводами WordPress, будет работать с этим плагином.
